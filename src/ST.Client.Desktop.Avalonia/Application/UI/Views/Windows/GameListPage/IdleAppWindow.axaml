<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
        Width="600" Height="450"
        x:Class="System.Application.UI.Views.Windows.IdleAppWindow"
        xmlns:resx="clr-namespace:System.Application.UI.Resx;assembly=System.Application.SteamTools.Client.Desktop"
        xmlns:vm="clr-namespace:System.Application.UI.ViewModels;assembly=System.Application.SteamTools.Client.Desktop"
        xmlns:controls="clr-namespace:System.Application.UI.Views.Controls"
        xmlns:ms="clr-namespace:System.Application.Models.Settings;assembly=System.Application.SteamTools.Client.Desktop"
        FontFamily="{Binding Source={x:Static ms:UISettings.FontName},Path=Value, Mode=OneWay,Converter={StaticResource NameToFontFamilyConverter}}"
        Background="Transparent"
               xmlns:i="using:Avalonia.Xaml.Interactivity"
          xmlns:service="clr-namespace:System.Application.Services;assembly=System.Application.SteamTools.Client.Desktop"
        xmlns:ia="using:Avalonia.Xaml.Interactions.Core"
        ExtendClientAreaToDecorationsHint="True"
        ExtendClientAreaChromeHints="NoChrome"
        ExtendClientAreaTitleBarHeightHint="30"
        Title="{Binding Title}"
        x:DataType="vm:IdleAppWindowViewModel"
        x:CompileBindings="True">
  <Panel>
    <controls:TitleBar></controls:TitleBar>
    <DockPanel Grid.Column="1" Grid.RowSpan="2"  Margin="0 30 0 0">
      <Border  DockPanel.Dock="Top" Grid.Row="0" Grid.RowSpan="2" Grid.Column="1"  Classes="paper" Background="{DynamicResource ThemeBrushKey}" Padding="10" Margin="20 20 20 0">
        <DockPanel>
          <StackPanel Orientation="Horizontal" Spacing="8" HorizontalAlignment="Left">
            <ToggleSwitch Content="" OnContent="" OffContent=""
                          Margin="5 0 0 5"
                          IsChecked="{Binding Source={x:Static service:ProxyService.Current},Path=IsEnableScript}"
                          ToolTip.Tip="{ReflectionBinding Path=Res.CommunityFix_EnableScriptService,Mode=OneWay,Source={x:Static resx:R.Current}}"
                          VerticalAlignment="Center"></ToggleSwitch>


            <Button Background="Transparent" Cursor="Hand"
                    Command="{ReflectionBinding RefreshScriptButton}"
                    ToolTip.Tip="{ReflectionBinding Path=Res.Refresh,Mode=OneWay,Source={x:Static resx:R.Current}}">
              <PathIcon Width="16"  Data="{StaticResource RefreshDrawing}" />
            </Button>

          </StackPanel>

        </DockPanel>
      </Border>
      <ScrollViewer  HorizontalScrollBarVisibility="Disabled"
                    VerticalScrollBarVisibility="Auto"
                  Padding="20">
          <StackPanel>
            <ItemsRepeater Items="{Binding IdleGameList}">
              <ItemsRepeater.Layout>
                <UniformGridLayout ItemsJustification="SpaceEvenly" MinRowSpacing="10" MinColumnSpacing="20" MaximumRowsOrColumns="10" ItemsStretch="Fill" />
              </ItemsRepeater.Layout>
              <ItemsRepeater.ItemTemplate>
                <DataTemplate>
                  <StackPanel Spacing="8">
                    <Border DockPanel.Dock="Top" Classes="paper" Width="100">
        
                      <Panel x:Name="app" Width="{ReflectionBinding $parent.Width}"> 
                        <!--<gif:Image2 x:Name="library"
                                            Stretch="UniformToFill"
                                            DecodeWidth="{ReflectionBinding $parent.Width}"
                                            Source="{Binding LibraryLogoStream^}">
                         
                        </gif:Image2>-->
                        <Image Source="avares://System.Application.SteamTools.Client.Desktop.Avalonia/Application/UI/Assets/AppResources/Placeholders/0.png" 
                               Stretch="UniformToFill" 
                               >
                        </Image>
                        <TextBlock
                            Text="{Binding Value}"
                            VerticalAlignment="Center"
                            HorizontalAlignment="Center"
                            TextWrapping="WrapWithOverflow"
                            FontSize="20"
                            Foreground="{DynamicResource HighlightForegroundBrushKey}"
                            />
                      </Panel>
                    </Border>

                    <controls:ScrollingTextBlock Width="{ReflectionBinding #app.Width}" Text="{Binding Value}" FontSize="12" FontWeight="Bold" Foreground="{DynamicResource HighlightForegroundBrushKey}"/>
                    <controls:ScrollingTextBlock Width="{ReflectionBinding #app.Width}" Text="{Binding Key}" FontSize="10" Foreground="{DynamicResource InactiveForegroundBrushKey}" />
                  </StackPanel>
                </DataTemplate>
              </ItemsRepeater.ItemTemplate>
            </ItemsRepeater>
          </StackPanel>

    </ScrollViewer>
    </DockPanel>

  </Panel>
</Window>

<!--IsVisible="{Binding LibraryLogoStream^,Converter={StaticResource IsNullConverter}}"-->
<!--<ItemsControl Items="{Binding IdleGameList}">
  <ItemsControl.ItemTemplate>
    <DataTemplate>
      <StackPanel>
        <DockPanel Margin="0 10">
          <TextBlock Text="{Binding Value}"
                        HorizontalAlignment="Left"
                        VerticalAlignment="Center"></TextBlock>
          <TextBlock Text="{Binding Key}" HorizontalAlignment="Right"
                       VerticalAlignment="Center"></TextBlock>
        </DockPanel>
        <Separator Classes="Separator"  />
      </StackPanel>
    </DataTemplate>
  </ItemsControl.ItemTemplate>
</ItemsControl>-->
