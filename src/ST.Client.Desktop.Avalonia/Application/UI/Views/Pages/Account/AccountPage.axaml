<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:System.Application.UI.ViewModels"
             xmlns:resx="using:System.Application.UI.Resx"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             xmlns:controls="clr-namespace:System.Application.UI.Views.Controls"
             xmlns:service="using:System.Application.Services"
             xmlns:ms="using:System.Application.Settings"
             x:DataType="vm:AccountPageViewModel"
             xmlns:gif="using:AvaloniaGif"
             x:CompileBindings="True"
             x:Class="System.Application.UI.Views.Pages.AccountPage">
  <StackPanel HorizontalAlignment="Stretch" Margin="{StaticResource PageMargin}" Background="Transparent" Spacing="20">
    <StackPanel Spacing="8" DockPanel.Dock="Right">
      <Border DockPanel.Dock="Top"
          Classes="paper"
          Background="{DynamicResource ThemeBrushKey}"
          Padding="10"
          Margin="10 20 10 10">
        <Panel>
          <DockPanel >
            <gif:Image2 x:Name="avatar"
                          Source="{ReflectionBinding Path=AvatarPath, Source={x:Static service:UserService.Current},Mode=OneWay,Converter={StaticResource BitmapAssetValueConverter}}"
                          Stretch="Uniform"
                          VerticalAlignment="Center"
                          HorizontalAlignment="Left"
                          DecodeWidth="64"
                          Height="64"
                          Width="64"
                          FallbackSource="avares://System.Application.SteamTools.Client.Avalonia/Application/UI/Assets/AppResources/avatar.jpg">
              <gif:Image2.Clip>
                <EllipseGeometry Rect="0,0,64,64" />
              </gif:Image2.Clip>
            </gif:Image2>
            <StackPanel Spacing="5" Margin="10" >
              <TextBlock Text="{ReflectionBinding Path=Res.User_UnLogin,Mode=OneWay,Source={x:Static resx:R.Current}}"
                        IsVisible="{ReflectionBinding Path=User,Mode=OneWay,Source={x:Static service:UserService.Current},Converter={StaticResource IsNullConverter}}"
                        Foreground="{DynamicResource HighlightForegroundBrushKey}"
                        FontSize="14"
                        VerticalAlignment="Center"/>
              <StackPanel IsVisible="{ReflectionBinding Path=User,Mode=OneWay,Source={x:Static service:UserService.Current},Converter={StaticResource IsNullConverter},ConverterParameter=invert}">
                <controls:ScrollingTextBlock Text="{ReflectionBinding Path=User.NickName,Mode=OneWay,Source={x:Static service:UserService.Current}}"
                       Foreground="{DynamicResource HighlightForegroundBrushKey}"
                       FontSize="14"
                       VerticalAlignment="Center"/>
                <Label Content="{ReflectionBinding Path=User.LevelStr,Mode=OneWay,Source={x:Static service:UserService.Current}}" Foreground="{DynamicResource HighlightForegroundBrushKey}" VerticalContentAlignment="Center" FontSize="12"/>
              </StackPanel>
            </StackPanel>
            <WrapPanel HorizontalAlignment="Right">
              <Button Background="Transparent" Cursor="Hand"
                      Margin="10 0 10 0"
                 Command="{ReflectionBinding RefreshScriptButton}"
                    ToolTip.Tip="{ReflectionBinding Path=Res.Refresh,Mode=OneWay,Source={x:Static resx:R.Current}}">
                <PathIcon Width="16"  Data="{StaticResource RefreshDrawing}" />
              </Button>
              <Button Background="Transparent" Cursor="Hand"
                 Command="{ReflectionBinding RefreshScriptButton}"
                    ToolTip.Tip="{ReflectionBinding Path=Res.Refresh,Mode=OneWay,Source={x:Static resx:R.Current}}">
                <PathIcon Width="16"  Data="{StaticResource SearchDrawing}" />
              </Button>
            </WrapPanel>
          </DockPanel>

          <Separator Classes="Separator" Margin="0 0 0 5"></Separator>
          <DockPanel >
            <TextBlock Text=" / v" FontSize="14"></TextBlock>
          </DockPanel>
        </Panel>
      </Border>


    </StackPanel>
  </StackPanel>
</UserControl>

